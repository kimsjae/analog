openapi: 3.0.3

info:
  title: ANALOG API
  description: ANALOG는 회고 중심의 일기 서비스입니다. 일기를 작성하면 AI가 내용을 분석하고, 분석 결과를 저장하여 나중에 주간/월간 단위로 자신의 상태를 돌아볼 수 있도록 돕습니다.
  version: "1.0.0"

tags:
  - name: Auth
  - name: User
  - name: Diary
  - name: Summary

servers:
  - url: http://localhost:8080

paths:
  # =======================
  # Auth
  # =======================
  /api/auth/signup:
    post:
      tags: [Auth]
      summary: "로컬 회원가입"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SignupRequest"
      responses:
        "201":
          description: "회원가입 성공"
        "400":
          description: "요청 값 오류"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                badRequest:
                  $ref: "#/components/examples/Error400"
        "409":
          description: "이미 존재하는 이메일"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                conflict:
                  $ref: "#/components/examples/Error409"

  /api/auth/login:
    post:
      tags: [Auth]
      summary: "로컬 로그인"
      description: |
        로컬 계정(email/password)으로 로그인.
        refreshToken은 서버에서 해시로 저장(원문 저장 금지).
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginRequest"
      responses:
        "200":
          description: "로그인 성공"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TokenPairResponse"
        "400":
          description: "요청 값 오류"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                badRequest:
                  $ref: "#/components/examples/Error400"
        "401":
          description: "이메일 또는 비밀번호 불일치"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"

  /api/auth/oauth/{provider}:
    get:
      tags: [Auth]
      summary: "OAuth 로그인 (임시 스펙)"
      description: |
        OAuth 로그인 플로우는 제공자/프론트 구성에 따라 (code, redirectUri 등) 파라미터 정의가 필요할 수 있음.
        MVP에서는 구현을 뒤로 미루고, 실제 구현 시 스펙을 확정하는 것을 권장.
      parameters:
        - name: provider
          in: path
          required: true
          schema:
            type: string
            enum: [google, kakao]
      responses:
        "200":
          description: "OAuth 로그인 성공"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TokenPairResponse"
        "400":
          description: "지원하지 않는 provider 또는 미구현/요청 오류"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                badRequest:
                  $ref: "#/components/examples/Error400"

  /api/auth/token/refresh:
    post:
      tags: [Auth]
      summary: "Refresh 토큰으로 토큰 재발급"
      description: |
        서버는 refreshToken을 해시로 저장하고, 재발급 시 클라이언트가 보낸 refreshToken을 해시하여 매칭한다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TokenRefreshRequest"
      responses:
        "200":
          description: "토큰 재발급 성공"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TokenPairResponse"
        "400":
          description: "요청 값 오류"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                badRequest:
                  $ref: "#/components/examples/Error400"
        "401":
          description: "Refresh 토큰이 유효하지 않음/만료"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"

  /api/auth/logout:
    post:
      tags: [Auth]
      summary: "로그아웃"
      description: "서버에 저장된 refreshToken(해시)을 제거하여 재발급을 불가능하게 만든다."
      security:
        - bearerAuth: []
      responses:
        "200":
          description: "로그아웃 성공"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"

  # =======================
  # User
  # =======================
  /api/users/me:
    get:
      tags: [User]
      summary: "내 정보 조회"
      security:
        - bearerAuth: []
      responses:
        "200":
          description: "조회 성공"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserMeResponse"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"

    patch:
      tags: [User]
      summary: "내 정보 수정 (프로필)"
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserUpdateRequest"
      responses:
        "200":
          description: "수정 성공"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserMeResponse"
        "400":
          description: "요청 값 오류"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                badRequest:
                  $ref: "#/components/examples/Error400"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"

    delete:
      tags: [User]
      summary: "회원 탈퇴"
      description: "탈퇴 시 해당 사용자의 일기/분석/토큰 등 연관 데이터를 정리(영구 삭제)한 뒤 사용자 계정을 삭제한다."
      security:
        - bearerAuth: []
      responses:
        "204":
          description: "탈퇴 완료"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"

  /api/users/me/password:
    patch:
      tags: [User]
      summary: "비밀번호 변경 (LOCAL)"
      description: |
        LOCAL 계정만 비밀번호 변경 가능.
        currentPassword 검증 후 newPassword로 변경.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserPasswordChangeRequest"
      responses:
        "204":
          description: "변경 완료"
        "400":
          description: "현재 비밀번호 불일치 또는 OAuth 계정/요청 오류"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                badRequest:
                  $ref: "#/components/examples/Error400"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"

  # =======================
  # Diary
  # =======================
  /api/diaries:
    get:
      tags: [Diary]
      summary: "일기 목록 조회 (정상/휴지통 통합)"
      description: |
        trash 파라미터로 정상/휴지통 목록을 분리 조회한다.
        - trash=false(기본): deletedAt IS NULL (정상 일기만)
        - trash=true: deletedAt IS NOT NULL (휴지통 일기만)
      security:
        - bearerAuth: []
      parameters:
        - name: trash
          in: query
          required: false
          description: "휴지통 조회 여부(기본 false). true면 deletedAt != null 인 일기만 조회."
          schema:
            type: boolean
            default: false
          example: true
        - name: from
          in: query
          description: "조회 시작 날짜 (YYYY-MM-DD)"
          required: false
          schema:
            type: string
            format: date
          example: 2026-01-01
        - name: to
          in: query
          description: "조회 종료 날짜 (YYYY-MM-DD)"
          required: false
          schema:
            type: string
            format: date
          example: 2026-01-31
        - name: page
          in: query
          description: "페이지 번호 (0부터 시작)"
          required: false
          schema:
            type: integer
            minimum: 0
          example: 0
        - name: size
          in: query
          description: "페이지 크기"
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
          example: 10
      responses:
        "200":
          description: "조회 성공"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DiaryListResponse"
        "400":
          description: "요청 값 오류 (예: 날짜 포맷/범위 오류)"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                badRequest:
                  $ref: "#/components/examples/Error400"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"

    post:
      tags: [Diary]
      summary: "일기 작성 (AI 분석 포함)"
      description: |
        일기 작성 시 AI 분석을 수행하고 결과를 저장한다.
        분석 상태(status)는 PENDING/SUCCESS/FAILED 중 하나로 표현된다.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DiaryCreateRequest"
      responses:
        "201":
          description: "생성 성공"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DiaryResponse"
        "400":
          description: "요청 값 오류"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                badRequest:
                  $ref: "#/components/examples/Error400"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"

  /api/diaries/{diaryId}:
    get:
      tags: [Diary]
      summary: "일기 단건 조회 (정상/휴지통 통합)"
      description: |
        trash 파라미터로 정상/휴지통 단건을 분리 조회한다.
        - trash=false(기본): deletedAt IS NULL 인 일기만 조회 가능
        - trash=true: deletedAt IS NOT NULL 인 일기만 조회 가능
        조건이 맞지 않으면 404 처리.
      security:
        - bearerAuth: []
      parameters:
        - name: diaryId
          in: path
          required: true
          schema:
            type: integer
            format: int64
        - name: trash
          in: query
          required: false
          description: "휴지통 단건 조회 여부(기본 false). true면 deletedAt != null 인 일기만 조회."
          schema:
            type: boolean
            default: false
          example: true
      responses:
        "200":
          description: "조회 성공"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DiaryResponse"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"
        "403":
          description: "권한 없음 (다른 사용자의 일기)"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                forbidden:
                  $ref: "#/components/examples/Error403"
        "404":
          description: "일기 없음 또는 trash 조건 불일치"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                notFound:
                  $ref: "#/components/examples/Error404"

    patch:
      tags: [Diary]
      summary: "일기 수정 (내용 변경 시 AI 재분석)"
      description: |
        content가 변경된 경우에만 AI 분석을 재수행하고 결과를 갱신 저장한다.
        title만 변경되는 경우에는 분석을 재수행하지 않는다.
        휴지통(deletedAt != null) 상태의 일기는 수정 불가.
      security:
        - bearerAuth: []
      parameters:
        - name: diaryId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DiaryUpdateRequest"
      responses:
        "200":
          description: "수정 성공"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DiaryResponse"
        "400":
          description: "요청 값 오류 (예: 빈 바디, 휴지통 상태 수정 시도 등)"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                badRequest:
                  $ref: "#/components/examples/Error400"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"
        "403":
          description: "권한 없음 (다른 사용자의 일기)"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                forbidden:
                  $ref: "#/components/examples/Error403"
        "404":
          description: "일기 없음"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                notFound:
                  $ref: "#/components/examples/Error404"

    delete:
      tags: [Diary]
      summary: "일기 삭제 (휴지통 이동)"
      description: |
        하드 삭제가 아니라 휴지통(soft delete)로 이동한다.
        deletedAt을 현재 시각으로 설정한다.
        일정 기간이 지나면 서버 배치 작업에 의해 자동 영구 삭제될 수 있다.
      security:
        - bearerAuth: []
      parameters:
        - name: diaryId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "204":
          description: "휴지통 이동 완료"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"
        "403":
          description: "권한 없음 (다른 사용자의 일기)"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                forbidden:
                  $ref: "#/components/examples/Error403"
        "404":
          description: "일기 없음"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                notFound:
                  $ref: "#/components/examples/Error404"

  /api/diaries/{diaryId}/restore:
    post:
      tags: [Diary]
      summary: "휴지통 일기 복구"
      description: |
        deletedAt을 NULL로 되돌린다.
        휴지통 상태가 아닌 일기는 404 처리.
      security:
        - bearerAuth: []
      parameters:
        - name: diaryId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: "복구 성공"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DiaryResponse"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"
        "403":
          description: "권한 없음 (다른 사용자의 일기)"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                forbidden:
                  $ref: "#/components/examples/Error403"
        "404":
          description: "일기 없음 또는 휴지통 상태 아님"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                notFound:
                  $ref: "#/components/examples/Error404"

  /api/diaries/{diaryId}/force:
    delete:
      tags: [Diary]
      summary: "일기 영구 삭제 (하드 삭제)"
      description: |
        일기를 영구 삭제한다.
        연관된 DiaryAnalysis도 함께 삭제되어야 한다.
      security:
        - bearerAuth: []
      parameters:
        - name: diaryId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "204":
          description: "영구 삭제 완료"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"
        "403":
          description: "권한 없음 (다른 사용자의 일기)"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                forbidden:
                  $ref: "#/components/examples/Error403"
        "404":
          description: "일기 없음"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                notFound:
                  $ref: "#/components/examples/Error404"

  # =======================
  # Summary
  # =======================
  /api/summaries/weekly:
    get:
      tags: [Summary]
      summary: "주간 요약"
      description: "저장된 분석 결과 기반으로 주간 요약을 생성/조회"
      security:
        - bearerAuth: []
      parameters:
        - name: date
          in: query
          required: false
          description: "기준 날짜(이 날짜가 속한 주를 요약). 미입력 시 현재 주."
          schema:
            type: string
            format: date
          example: 2026-01-08
      responses:
        "200":
          description: "주간 요약 반환"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WeeklySummaryResponse"
        "400":
          description: "요청 값 오류 (예: date 포맷 오류)"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                badRequest:
                  $ref: "#/components/examples/Error400"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"

  /api/summaries/monthly:
    get:
      tags: [Summary]
      summary: "월간 요약"
      description: "저장된 분석 결과 기반으로 월간 요약을 생성/조회"
      security:
        - bearerAuth: []
      parameters:
        - name: year
          in: query
          required: false
          schema:
            type: integer
            minimum: 1970
          example: 2026
        - name: month
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 12
          example: 1
      responses:
        "200":
          description: "월간 요약 반환"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlySummaryResponse"
        "400":
          description: "요청 값 오류 (예: month 범위 오류)"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                badRequest:
                  $ref: "#/components/examples/Error400"
        "401":
          description: "인증 실패"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                unauthorized:
                  $ref: "#/components/examples/Error401"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  # ✅ 상태코드별 예시를 분리(보편적인 방식)
  examples:
    Error400:
      summary: "400 Bad Request"
      value:
        errorCode: "REQ_400"
        message: "Bad Request"
        timestamp: "2026-01-13T15:00:00+09:00"
        path: "/api/diaries"
    Error401:
      summary: "401 Unauthorized"
      value:
        errorCode: "AUTH_401"
        message: "Unauthorized"
        timestamp: "2026-01-13T15:00:00+09:00"
        path: "/api/diaries/1"
    Error403:
      summary: "403 Forbidden"
      value:
        errorCode: "AUTH_403"
        message: "Forbidden"
        timestamp: "2026-01-13T15:00:00+09:00"
        path: "/api/diaries/1"
    Error404:
      summary: "404 Not Found"
      value:
        errorCode: "RES_404"
        message: "Not Found"
        timestamp: "2026-01-13T15:00:00+09:00"
        path: "/api/diaries/1"
    Error409:
      summary: "409 Conflict"
      value:
        errorCode: "RES_409"
        message: "Conflict"
        timestamp: "2026-01-13T15:00:00+09:00"
        path: "/api/auth/signup"

  schemas:
    # ---------- Common ----------
    ErrorResponse:
      type: object
      required: [errorCode, message, timestamp]
      properties:
        errorCode:
          type: string
          description: "에러 코드 (예: AUTH_401, AUTH_403, RES_404, REQ_400, RES_409)"
        message:
          type: string
          description: "에러 메시지"
        timestamp:
          type: string
          format: date-time
          description: "서버 시각(ISO-8601)"
        path:
          type: string
          description: "요청 경로"

    # ---------- Auth ----------
    SignupRequest:
      type: object
      required: [email, password, name]
      properties:
        email:
          type: string
          example: "test@example.com"
        password:
          type: string
          example: "password1234"
        name:
          type: string
          example: "성재"

    LoginRequest:
      type: object
      required: [email, password]
      properties:
        email:
          type: string
          example: "test@example.com"
        password:
          type: string
          example: "password1234"

    TokenRefreshRequest:
      type: object
      required: [refreshToken]
      properties:
        refreshToken:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

    TokenPairResponse:
      type: object
      required: [accessToken, refreshToken]
      properties:
        accessToken:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        refreshToken:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

    # ---------- User ----------
    UserMeResponse:
      type: object
      required: [id, name, provider]
      properties:
        id:
          type: integer
          format: int64
          example: 1
        email:
          type: string
          nullable: true
          example: "test@example.com"
        name:
          type: string
          example: "성재"
        provider:
          type: string
          example: "LOCAL"

    UserUpdateRequest:
      type: object
      properties:
        name:
          type: string
          example: "새이름"

    UserPasswordChangeRequest:
      type: object
      required: [currentPassword, newPassword]
      properties:
        currentPassword:
          type: string
          example: "oldPass1234"
        newPassword:
          type: string
          example: "newPass5678"

    # ---------- Diary ----------
    DiaryCreateRequest:
      type: object
      required: [title, content, diaryDate]
      properties:
        title:
          type: string
          example: "오늘의 기록"
        content:
          type: string
          example: "오늘은 조금 우울했지만 산책을 했다."
        diaryDate:
          type: string
          format: date
          example: "2026-01-08"

    DiaryUpdateRequest:
      type: object
      description: "title/content 중 최소 1개는 포함되어야 함"
      properties:
        title:
          type: string
          example: "수정된 제목"
        content:
          type: string
          example: "수정된 내용입니다."
      minProperties: 1

    DiaryAnalysis:
      type: object
      required: [status, analyzedAt]
      properties:
        status:
          type: string
          enum: [PENDING, SUCCESS, FAILED]
          example: "SUCCESS"
        emotionCategory:
          type: string
          nullable: true
          example: "SADNESS"
        emotionScore:
          type: number
          format: double
          nullable: true
          example: -0.4
        summarySentence:
          type: string
          nullable: true
          example: "우울한 감정 속에서도 회복하려는 하루였다."
        analyzedAt:
          type: string
          format: date-time
          example: "2026-01-08T12:34:56+09:00"

    DiaryResponse:
      type: object
      required: [diaryId, diaryDate, title, content, createdAt, analysis]
      properties:
        diaryId:
          type: integer
          format: int64
          example: 1
        diaryDate:
          type: string
          format: date
          example: "2026-01-08"
        title:
          type: string
          example: "오늘의 기록"
        content:
          type: string
          example: "오늘은 조금 우울했지만 산책을 했다."
        createdAt:
          type: string
          format: date-time
          example: "2026-01-08T09:00:00+09:00"
        updatedAt:
          type: string
          format: date-time
          nullable: true
          example: "2026-01-09T09:00:00+09:00"
        deletedAt:
          type: string
          format: date-time
          nullable: true
          description: "휴지통 상태일 때 삭제 시각. 정상 상태면 null."
          example: "2026-01-10T09:30:00+09:00"
        analysis:
          $ref: "#/components/schemas/DiaryAnalysis"

    PageInfo:
      type: object
      required: [page, size, totalElements, totalPages]
      properties:
        page:
          type: integer
          example: 0
        size:
          type: integer
          example: 10
        totalElements:
          type: integer
          example: 25
        totalPages:
          type: integer
          example: 3

    DiaryListResponse:
      type: object
      required: [diaries, pageInfo]
      properties:
        diaries:
          type: array
          items:
            $ref: "#/components/schemas/DiaryResponse"
        pageInfo:
          $ref: "#/components/schemas/PageInfo"

    # ---------- Summary ----------
    WeeklySummaryResponse:
      type: object
      required: [period, summarySentence]
      properties:
        period:
          type: string
          example: "2026-01-05 ~ 2026-01-11"
        summarySentence:
          type: string
          example: "이번 주는 전반적으로 차분한 날이 많았어요."

    MonthlySummaryResponse:
      type: object
      required: [period, summarySentence]
      properties:
        period:
          type: string
          example: "2026-01-01 ~ 2026-01-31"
        summarySentence:
          type: string
          example: "이번 달은 불안함과 회복이 번갈아 나타났어요."
